{% extends "../home.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white shadow rounded-lg overflow-hidden">
            <!-- Card Header -->
            <div class="bg-blue-600 px-6 py-4">
                <h2 class="text-2xl font-bold text-white">{{ title }}</h2>
            </div>

            <!-- Card Body -->
            <div class="p-6">
                <form method="post">
                    {% csrf_token %}

                    {% if form.errors or profile_form.errors %}
                    <div class="mb-6 p-4 bg-red-50 text-red-700 rounded-md border border-red-200">
                        <strong class="font-medium">Please correct the errors below.</strong>
                    </div>
                    {% endif %}

                    <!-- Username and Email -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="id_username" class="block text-sm font-medium text-gray-700 mb-1">
                                Username *
                            </label>
                            {{ form.username }}
                            {% if form.username.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.username.errors }}</p>
                            {% endif %}
                        </div>
                        <div>
                            <label for="id_email" class="block text-sm font-medium text-gray-700 mb-1">
                                Email *
                            </label>
                            {{ form.email }}
                            {% if form.email.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.email.errors }}</p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- First Name and Last Name -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="id_first_name" class="block text-sm font-medium text-gray-700 mb-1">
                                First Name
                            </label>
                            {{ form.first_name }}
                            {% if form.first_name.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.first_name.errors }}</p>
                            {% endif %}
                        </div>
                        <div>
                            <label for="id_last_name" class="block text-sm font-medium text-gray-700 mb-1">
                                Last Name
                            </label>
                            {{ form.last_name }}
                            {% if form.last_name.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.last_name.errors }}</p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Password Fields -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="id_password1" class="block text-sm font-medium text-gray-700 mb-1">
                                Password *
                            </label>
                            {{ form.password1 }}
                            {% if form.password1.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.password1.errors }}</p>
                            {% endif %}
                        </div>
                        <div>
                            <label for="id_password2" class="block text-sm font-medium text-gray-700 mb-1">
                                Confirm Password *
                            </label>
                            {{ form.password2 }}
                            {% if form.password2.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.password2.errors }}</p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Shop and User Type -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div>
                            <label for="id_shop" class="block text-sm font-medium text-gray-700 mb-1">
                                Shop
                            </label>
                            {{ profile_form.shop }}
                            {% if profile_form.shop.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ profile_form.shop.errors }}</p>
                            {% endif %}
                        </div>
                        <div>
                            <label for="id_user_type" class="block text-sm font-medium text-gray-700 mb-1">
                                User Type
                            </label>
                            {{ profile_form.user_type }}
                            {% if profile_form.user_type.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ profile_form.user_type.errors }}</p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Account Status -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div class="flex items-center">
                            {{ form.is_active }}
                            <label for="id_is_active" class="ml-2 text-sm text-gray-700">
                                Active Account
                            </label>
                        </div>
                    </div>

                    <!-- Buttons -->
                    <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200">
                        <button type="submit"
                            class="px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                            Save User
                        </button>
                        <a href="{% url 'user_management' %}"
                            class="px-4 py-2 bg-gray-200 text-gray-800 font-medium rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors text-center">
                            Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    /* Tailwind-compatible custom styles */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    select {
        width: 100%;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
        border: 1px solid #D1D5DB;
        box-shadow: inset 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="password"]:focus,
    select:focus {
        outline: none;
        border-color: #3B82F6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
    }

    input[type="checkbox"] {
        width: 1rem;
        height: 1rem;
        border-radius: 0.25rem;
        border: 1px solid #D1D5DB;
        color: #3B82F6;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    input[type="checkbox"]:focus {
        outline: none;
        border-color: #3B82F6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
    }
</style>
{% endblock %}